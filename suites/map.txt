*** Settings ***
Library                SSHLibrary
Library                String
Suite Setup            Open Connection And Log In
Suite Teardown         Close All Connections

*** Variables ***
#variables
${HOST}    192.168.102.100
${USER}    admin
${PASSWORD}    nasadmin
${pool_name}    pool1
${lun_name}    lun1
${lun_size}    100g

*** Keywords ***
Open Connection And Log In
    Open Connection    ${HOST}
    Login    ${USER}    ${PASSWORD}
    Write    xlogin -y
    Read Until    Password:
    Write    qnapsupport

*** Test Cases ***
fetch the disk
    write    disk status
    ${output}=    Read    delay=5s
    ${Lines}=    Get Lines Containing String    ${output}    ready
    ${Line0}=    Get Line    ${Lines}    0
    ${disk_0}=     Fetch From Left    ${Line0}    ${SPACE}
    Set Global Variable    ${disk_0}
    ${Line1}=    Get Line    ${Lines}    1
    ${disk_1}=     Fetch From Left    ${Line1}    ${SPACE}
    Set Global Variable    ${disk_1}
    ${Line2}=    Get Line    ${Lines}    2
    ${disk_2}=     Fetch From Left    ${Line2}    ${SPACE}
    Set Global Variable    ${disk_2}

*** Test Cases ***
create a stripe pool
    write    pool create stripe ${pool_name} ${disk_0} 
    ${output}=    Read    delay=10s
    write    pool status
    ${output}=    Read    delay=10s
    Should Contain   ${output}    ${pool_name}

*** Test Cases ***
create a lun
    write    lun create ${lun_name} ${pool_name} ${lun_size}
    ${output}=    Read    delay=10s
    Should Contain   ${output}    ${lun_name}

*** comment ***
map a lun and do operation

*** Test Cases ***
delete a lun
    write    lun delete ${lun_name}
    ${output}=    Read    delay=10s
    write    lun status
    ${output}=    Read    delay=10s
    Should Not Contain   ${output}    ${lun_name}

*** Test Cases ***
delete a pool
    write    pool delete ${pool_name}
    ${output}=    Read    delay=10s
    write    pool status
    ${output}=    Read    delay=10s
    Log To Console  ${output}
    Should Not Contain   ${output}    ${pool_name}
