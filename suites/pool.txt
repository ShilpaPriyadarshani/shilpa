*** Settings ***
Library                SSHLibrary
Library                String
Suite Setup            Open Connection And Log In
Suite Teardown         Close All Connections

*** Variables ***
#variables
${HOST}    192.168.102.100
${USER}    admin
${PASSWORD}    nasadmin
${pool_name}    pool1

*** Keywords ***
Open Connection And Log In
    Open Connection    ${HOST}
    Login    ${USER}    ${PASSWORD}
    Write    xlogin -y
    Read Until    Password:
    Write    qnapsupport

*** Test Cases ***
create a stripe pool
    write    disk status
    ${output}=    Read    delay=5s
    Log To Console  ${output}
    ${Lines}=    Get Lines Containing String    ${output}    ready
    Log To Console    ${Lines}
    ${Line0}=    Get Line    ${Lines}    0
    Log To Console    ${Line0}
    ${disk_0}=     Fetch From Left    ${Line0}    ${SPACE}
    Log To Console    ${disk_0}
    write    pool create stripe ${pool_name} ${disk_0} 
    ${output}=    Read    delay=10s
    Log To Console  ${output}
    write    pool status
    ${output}=    Read    delay=5s
    Log To Console  ${output}
    Should Contain   ${output}    ${pool_name}
    write    pool delete ${pool_name}
    ${output}=    Read    delay=15s
    Log To Console  ${output}
    write    pool status
    ${output}=    Read    delay=10s
    Log To Console  ${output}
